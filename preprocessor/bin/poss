#!/usr/bin/env node

const fs = require('fs');
const minimist = require('minimist');
const poss = require('../lib');

main();

function main() {
    const argv = minimist(process.argv.slice(2));

    if(!argv.input) {
        return console.error('[POSS] Please include --input');
    }

    if(!argv.output) {
        return console.error('[POSS] Please include --output');
    }

    const input = fs.readFileSync(argv.input, {
        encoding: 'utf-8'
    });

    fs.writeFile(argv.output, poss(input), (err) => {
        if(err) {
            return console.error(err);
        }
        console.log('Compiled: ', argv.output);
    });
}
